<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQLMap 2.0//EN"
"http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="authorityGroup">


	<typeAlias alias="authorityGroupTO" type="com.estimulo.system.authorityManager.to.AuthorityGroupTO"/>
	
	<resultMap class="authorityGroupTO" id="authorityGroupResult">
		<result property="authority" column="AUTHORITY" />
		<result property="authorityGroupCode" column="AUTHORITY_GROUP_CODE" />
		<result property="authorityGroupName" column="AUTHORITY_GROUP_NAME" />
	</resultMap>
	
	<select id="selectUserAuthorityGroupList" parameterClass="String" resultMap="authorityGroupResult">
		SELECT T1.*, DECODE(emp_code, NULL, 0, 1) AS authority
          		FROM AUTHORITY_GROUP T1, (SELECT *
          		  FROM EMPLOYEE_AUTHORITY 
          		 WHERE emp_code=#empCode#) T2 
          		 WHERE T1.AUTHORITY_GROUP_CODE = T2.AUTHORITY_GROUP_CODE(+)
          		 ORDER BY T1.AUTHORITY_GROUP_CODE
	</select>
	
	<select id="selectAuthorityGroupList" resultMap="authorityGroupResult">
		SELECT * FROM AUTHORITY_GROUP
	</select>
	
	<typeAlias alias="EmployeeAuthorityTO" type="com.estimulo.system.authorityManager.to.EmployeeAuthorityTO"/>
	
	<insert id="insertEmployeeAuthorityGroup" parameterClass="EmployeeAuthorityTO">
		INSERT INTO EMPLOYEE_AUTHORITY VALUES(#empCode#, #authorityGroupCode#)		
	</insert>

	<delete id="deleteEmployeeAuthorityGroup" parameterClass="String">
		DELETE EMPLOYEE_AUTHORITY WHERE EMP_CODE=#empCode#
	</delete>
</sqlMap>