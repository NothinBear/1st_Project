<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQLMap 2.0//EN"
   "http://ibatis.apache.org/dtd/sql-map-2.dtd">
   
<sqlMap namespace="workOrder">
	<typeAlias alias="WorkOrderableMrpListTO" type="com.estimulo.logistics.production.to.WorkOrderableMrpListTO"/>
	
	<resultMap class="WorkOrderableMrpListTO" id="workOrderableMrpListResult">
		<result property="mrpNo" column="MRP_NO"  />
		<result property="mrpGatheringNo" column="MRP_GATHERING_NO"  />
		<result property="itemClassification" column="ITEM_CLASSIFICATION"  />
		<result property="itemCode" column="ITEM_CODE"  />
		<result property="itemName" column="ITEM_NAME"  />
		<result property="unitOfMrp" column="UNIT_OF_MRP"  />
		<result property="requiredAmount" column="REQUIRED_AMOUNT" />
		<result property="orderDate" column="ORDER_DATE"  />
		<result property="requiredDate" column="REQUIRED_DATE"  />
	</resultMap>
	
	<parameterMap class="map" id="getWorkOrderableMrpListParameter">
		<parameter property="ERROR_CODE" javaType="java.lang.Integer" jdbcType="DECIMAL" mode="OUT" />
		<parameter property="ERROR_MSG" javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT" />
		<parameter property="RESULT" javaType="java.sql.ResultSet" jdbcType="ORACLECURSOR" mode="OUT" />
	</parameterMap>
	
	<procedure id="getWorkOrderableMrpList" parameterMap="getWorkOrderableMrpListParameter" resultMap="workOrderableMrpListResult">
		<![CDATA[
		{call P_WORK_ORDERABLE_MRP_LIST(?,?,?)}
		]]>
	</procedure>
	
	<typeAlias alias="WorkOrderSimulationTO" type="com.estimulo.logistics.production.to.WorkOrderSimulationTO"/>
	
	<resultMap class="WorkOrderSimulationTO" id="workOrderSimulationResult">
		<result property="mrpGatheringNo" column="MRP_GATHERING_NO"  />
		<result property="itemClassification" column="ITEM_CLASSIFICATION"  />
		<result property="itemCode" column="ITEM_CODE"  />
		<result property="itemName" column="ITEM_NAME"  />
		<result property="unitOfMrp" column="UNIT_OF_MRP"  />
		<result property="inputAmount" column="INPUT_AMOUNT"  />
		<result property="requiredAmount" column="REQUIRED_AMOUNT" />
		<result property="stockAfterWork" column="STOCK_AFTER_WORK" />
		<result property="orderDate" column="ORDER_DATE"  />
		<result property="requiredDate" column="REQUIRED_DATE"  />
	</resultMap>
	
	<parameterMap class="map" id="getWorkOrderSimulationListParameter">
		<parameter property="mrpGatheringNo" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="mrpNo" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="ERROR_CODE" javaType="java.lang.Integer" jdbcType="DECIMAL" mode="OUT" />
		<parameter property="ERROR_MSG" javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT" />
		<parameter property="RESULT" javaType="java.sql.ResultSet" jdbcType="ORACLECURSOR" mode="OUT" />
	</parameterMap>
	
	<procedure id="getWorkOrderSimulationList" parameterMap="getWorkOrderSimulationListParameter" resultMap="workOrderSimulationResult">
		<![CDATA[
		{call P_WORK_ORDER_SIMULATION(?,?,?,?,?)}
		]]>
	</procedure>
	
	<parameterMap class="map" id="workOrderParameter">
		<parameter property="mrpGatheringNo" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="workPlaceCode" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="productionProcess" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="mrpNo" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="ERROR_CODE" javaType="java.lang.Integer" jdbcType="DECIMAL" mode="OUT" />
		<parameter property="ERROR_MSG" javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT" />			
	</parameterMap>
	
	<procedure id="workOrder" parameterMap="workOrderParameter">
		<![CDATA[
		{call P_WORK_ORDER(?,?,?,?,?,?)}
		]]>
	</procedure>
	
	<typeAlias alias="WorkOrderInfoTO" type="com.estimulo.logistics.production.to.WorkOrderInfoTO"/>
	
	<resultMap class="WorkOrderInfoTO" id="workOrderInfoResult">
		<result property="workOrderNo" column="WORK_ORDER_NO"  />
		<result property="mrpGatheringNo" column="MRP_GATHERING_NO"  />
		<result property="itemClassification" column="ITEM_CLASSIFICATION"  />
		<result property="itemCode" column="ITEM_CODE"  />
		<result property="itemName" column="ITEM_NAME"  />
		<result property="unitOfMrp" column="UNIT_OF_MRP"  />
		<result property="requiredAmount" column="REQUIRED_AMOUNT" />
		<result property="workSiteCode" column="WORK_SITE_CODE" />
		<result property="workSiteName" column="WORK_SITE_NAME" />
		<result property="productionProcessCode" column="PRODUCTION_PROCESS_CODE" />
		<result property="productionProcessName" column="PRODUCTION_PROCESS_NAME" />
		<result property="inspectionStatus" column="INSPECTION_STATUS" />			
		<result property="productionStatus" column="PRODUCTION_STATUS"  />
		<result property="completionStatus" column="COMPLETION_STATUS"  />
	</resultMap>
	
	<select id="selectWorkOrderInfoList" resultMap="workOrderInfoResult">
		SELECT * FROM WORK_ORDER_INFO WHERE OPERATION_COMPLETED IS NULL
	</select>
	
	<parameterMap class="map" id="workOrderCompletionParameter">
		<parameter property="workOrderNo" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="actualCompletionAmount" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="ERROR_CODE" javaType="java.lang.Integer" jdbcType="DECIMAL" mode="OUT" />
		<parameter property="ERROR_MSG" javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT" />			
	</parameterMap>
	
	<procedure id="workOrderCompletion" parameterMap="workOrderCompletionParameter">
		<![CDATA[
		{call P_WORK_ORDER_COMPLETION(?,?,?,?)}
		]]>
	</procedure>
	
	<typeAlias alias="ProductionPerformanceInfoTO" type="com.estimulo.logistics.production.to.ProductionPerformanceInfoTO"/>
	
	<resultMap class="ProductionPerformanceInfoTO" id="productionPerformanceInfoResult">
		<result property="workOrderCompletionDate" column="WORK_ORDER_COMPLETION_DATE"  />
		<result property="workOrderNo" column="WORK_ORDER_NO"  />
		<result property="mpsNo" column="MPS_NO"  />
		<result property="contractDetailNo" column="CONTRACT_DETAIL_NO"  />
		<result property="itemClassification" column="ITEM_CLASSIFICATION"  />
		<result property="itemCode" column="ITEM_CODE"  />
		<result property="itemName" column="ITEM_NAME"  />
		<result property="unit" column="UNIT"  />
		<result property="workOrderAmount" column="WORK_ORDER_AMOUNT" />
		<result property="actualCompletionAmount" column="ACTUAL_COMPLETION_AMOUNT" />
		<result property="workSuccessRate" column="WORK_SUCCESS_RATE" />			
	</resultMap>
	
	<select id="selectProductionPerformanceInfoList" resultMap="productionPerformanceInfoResult">
		SELECT * FROM PRODUCTION_PERFORMANCE order by work_order_completion_date,work_order_no desc
	</select>
	
	<typeAlias alias="WorkSiteSimulationTO" type="com.estimulo.logistics.production.to.WorkSiteSimulationTO"/>
	
	<resultMap class="WorkSiteSimulationTO" id="workSiteSimulationResult">
		<result property="workOrderNo" column="WORK_ORDER_NO"  />
		<result property="workSiteName" column="WORK_SITE_NAME"  />
		<result property="wdItem" column="WD_ITEM"  />
		<result property="parentItemCode" column="PARENT_ITEM_CODE"  />
		<result property="parentItemName" column="PARENT_ITEM_NAME"  />
		<result property="itemClassIfication" column="ITEM_CLASSIFICATION"  />
		<result property="itemCode" column="ITEM_CODE" />
		<result property="itemName" column="ITEM_NAME" />
		<result property="requiredAmount" column="REQUIRED_AMOUNT" />
	</resultMap>
	
	<parameterMap class="map" id="selectWorkSiteSituationParameter">
		<parameter property="workOrderNo" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="workSiteCourse" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="itemClassIfication" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="ERROR_CODE" javaType="java.lang.Integer" jdbcType="DECIMAL" mode="OUT" />
		<parameter property="ERROR_MSG" javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT" />
		<parameter property="RESULT" javaType="java.sql.ResultSet" jdbcType="ORACLECURSOR" mode="OUT" />		
	</parameterMap>
	
	<procedure id="selectWorkSiteSituation" parameterMap="selectWorkSiteSituationParameter" resultMap="workSiteSimulationResult">
		<![CDATA[
		{call P_WORK_SITE_SITUATION(?,?,?,?,?,?)}
		]]>
	</procedure>
	
	<parameterMap class="map" id="updateWorkCompletionStatusParameter">
		<parameter property="workOrderNo" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="itemCode" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="itemCodeList" javaType="java.lang.String" jdbcType="VARCHAR" mode="IN" />
		<parameter property="ERROR_CODE" javaType="java.lang.Integer" jdbcType="DECIMAL" mode="OUT" />
		<parameter property="ERROR_MSG" javaType="java.lang.String" jdbcType="VARCHAR" mode="OUT" />	
	</parameterMap>
	
	<procedure id="updateWorkCompletionStatus" parameterMap="updateWorkCompletionStatusParameter">
		<![CDATA[
		{call P_WORK_SITE_COMPLETION(?,?,?,?,?)}
		]]>
	</procedure>
	
	<typeAlias alias="WorkSiteLog" type="com.estimulo.logistics.production.to.WorkSiteLog"/>
	
	<resultMap class="WorkSiteLog" id="workSiteLogResult">
		<result property="workOrderNo" column="WORK_ORDER_NO"  />
		<result property="itemCode" column="ITEM_CODE" />
		<result property="itemName" column="ITEM_NAME" />
		<result property="reaeson" column="REAESON" />
		<result property="workSiteName" column="WORK_SITE_NAME"  />
		<result property="workDate" column="WORK_DATE" />
		<result property="productionProcessCode" column="PRODUCTION_PROCESS_CODE" />
		<result property="productionProcessName" column="PRODUCTION_PROCESS_NAME" />
	</resultMap>
	
	<select id="workSiteLogList" parameterClass="String" resultMap="workSiteLogResult">
		SELECT * FROM work_site_log where WORK_DATE LIKE TO_DATE(#workSiteLogDate#,'YYYY-MM-DD') order by work_date
	</select>
	
</sqlMap>